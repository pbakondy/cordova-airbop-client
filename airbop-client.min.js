angular.module("AirBopClient",[]).factory("$airbopClient",["$http","$q",function(t,e){"use strict";function r(){return Math.floor((new Date).getTime()/1e3)}function i(t,e,r,i){return t+e+o+r+i+p}function a(t){if("function"!=typeof sha256)throw"Missing `sha256()` function";return sha256(t)}function n(n){if("string"!=typeof n.airbopAppKey)throw"Invalid `airbopAppKey` option";if("string"!=typeof n.airbopAppSecret)throw"Invalid `airbopAppSecret` option";if("string"!=typeof n.regid)throw"Invalid `regid` option";o=n.airbopAppKey,p=n.airbopAppSecret;var S=e.defer(),T=r(),K={};K[b]=n.regid,"string"==typeof n.country&&(K[l]=n.country),"string"==typeof n.state&&(K[m]=n.state),"string"==typeof n.label&&(K[c]=n.label),"string"==typeof n.language&&(K[y]=n.language),"string"==typeof n.latitude&&(K[d]=n.latitude),"string"==typeof n.longitude&&(K[h]=n.longitude);var j=i(s,u,T,JSON.stringify(K)),C=a(j),I={};I[v]=o,I[w]=T,I[A]=C,I[x]=g;var O={data:K,headers:I,method:s,params:K,timeout:f,url:u};return t(O).then(function(t){200===t.status?S.resolve("OK"):S.reject({data:t.data,status:t.status,statusText:t.statusText})},S.reject),S.promise}var o,p,s="POST",u="http://www.airbop.com/api/v1/register",g="application/json",f=6e4,l="country",c="label",y="lang",d="lat",h="long",b="reg",m="state",v="x-app-key",w="x-timestamp",A="x-signature",x="Content-Type";return{register:n}}]);